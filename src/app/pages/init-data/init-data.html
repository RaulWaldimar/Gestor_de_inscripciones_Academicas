<div class="init-container">
  <div class="init-card">
    <div class="init-header">
      <h1>ğŸ“ Gestor de Inscripciones AcadÃ©micas</h1>
      <p>InicializaciÃ³n de Base de Datos</p>
    </div>

    <div class="init-content">
      <!-- Verificando datos -->
      <div *ngIf="verificandoDatos" class="loading-state">
        <div class="spinner-large"></div>
        <p>Verificando datos...</p>
      </div>

      <!-- Si datos YA EXISTEN -->
      <div *ngIf="datosYaExisten && completed && !verificandoDatos" class="success-state">
        <div class="success-icon">âœ…</div>
        <h2>Â¡Datos Ya Cargados!</h2>
        <p>La base de datos ya contiene informaciÃ³n</p>
        
        <div class="credentials">
          <h3>Credenciales de Acceso:</h3>
          
          <div class="credential-box admin">
            <h4>ğŸ‘¤ Admin</h4>
            <p><strong>Email:</strong> admin@cole.pe</p>
            <p><strong>ContraseÃ±a:</strong> Admin123!</p>
            <p><strong>Rol:</strong> Administrador</p>
          </div>

          <div class="credential-box student">
            <h4>ğŸ“š Estudiante (Ejemplo)</h4>
            <p><strong>Email:</strong> juan.quispe@cole.pe</p>
            <p><strong>ContraseÃ±a:</strong> Estudiante123!</p>
            <p><strong>Rol:</strong> Estudiante</p>
          </div>

          <div class="credential-box teacher">
            <h4>ğŸ‘¨â€ğŸ« Docente (Ejemplo)</h4>
            <p><strong>Email:</strong> fabric@cole.pe</p>
            <p><strong>ContraseÃ±a:</strong> Docente123!</p>
            <p><strong>Rol:</strong> Docente</p>
          </div>
        </div>

        <div class="action-buttons">
          <button class="btn btn-success" (click)="continuar()">
            âœ… Continuar
          </button>
        </div>
      </div>

      <!-- Si datos NO existen -->
      <div *ngIf="!datosYaExisten && !loading && !verificandoDatos" class="init-message">
        <p>Para utilizar la aplicaciÃ³n, es necesario inicializar la base de datos con datos de prueba.</p>
        <p class="small-text">Se crearÃ¡n:</p>
        <ul>
          <li>âœ… 1 usuario Admin</li>
          <li>âœ… 5 docentes</li>
          <li>âœ… 20 estudiantes</li>
          <li>âœ… 5 cursos</li>
          <li>âœ… MatrÃ­culas automÃ¡ticas respetando grado-secciÃ³n</li>
        </ul>
        <button class="btn btn-primary" (click)="initializeDatabase()" [disabled]="loading">
          <span *ngIf="!loading">Inicializar Base de Datos</span>
          <span *ngIf="loading"><span class="spinner"></span> Inicializando...</span>
        </button>
      </div>

      <!-- Cargando datos -->
      <div *ngIf="loading" class="loading-state">
        <div class="spinner-large"></div>
        <p>Cargando datos en Firestore...</p>
        <p class="small-text">Por favor espera, esto puede tomar algunos segundos...</p>
      </div>

      <!-- Completado (despuÃ©s de cargar) -->
      <div *ngIf="!datosYaExisten && completed && !loading && !verificandoDatos" class="success-state">
        <div class="success-icon">âœ…</div>
        <h2>Â¡Base de Datos Inicializada!</h2>
        <p>Datos cargados correctamente</p>
        
        <div class="credentials">
          <h3>Credenciales de Acceso:</h3>
          
          <div class="credential-box admin">
            <h4>ğŸ‘¤ Admin</h4>
            <p><strong>Email:</strong> admin@cole.pe</p>
            <p><strong>ContraseÃ±a:</strong> Admin123!</p>
            <p><strong>Rol:</strong> Administrador</p>
          </div>

          <div class="credential-box student">
            <h4>ğŸ“š Estudiante (Ejemplo)</h4>
            <p><strong>Email:</strong> juan.quispe@cole.pe</p>
            <p><strong>ContraseÃ±a:</strong> Estudiante123!</p>
            <p><strong>Rol:</strong> Estudiante</p>
          </div>

          <div class="credential-box teacher">
            <h4>ğŸ‘¨â€ğŸ« Docente (Ejemplo)</h4>
            <p><strong>Email:</strong> fabric@cole.pe</p>
            <p><strong>ContraseÃ±a:</strong> Docente123!</p>
            <p><strong>Rol:</strong> Docente</p>
          </div>
        </div>

        <div class="action-buttons">
          <a href="/login" class="btn btn-success">Ir a Login</a>
        </div>

        <div *ngIf="cleaningResults" class="cleanup-results">
          <h3>Resultados de Limpieza:</h3>
          <p>âœ… Eliminados: {{ cleaningResults.eliminados }}</p>
          <p *ngIf="cleaningResults.errores > 0" class="error-text">âš ï¸ Errores: {{ cleaningResults.errores }}</p>
          <p *ngIf="cleaningResults.errores === 0" class="success-text">âœ… Sin errores</p>
        </div>
      </div>

      <!-- Error -->
      <div *ngIf="error" class="error-state">
        <div class="error-icon">âš ï¸</div>
        <p>{{ error }}</p>
        <button class="btn btn-primary" (click)="initializeDatabase()">Reintentar</button>
      </div>
    </div>
  </div>
</div>
